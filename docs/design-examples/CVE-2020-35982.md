````rust
S: ident
T: ty
cap: ident
len: ident
ptr: ident

pat_slab_struct = ```rust
    struct $S<$T> {
        $ptr: *mut $T,
        $cap: usize,
        $len: usize,
    }
```

// use ptr::add
pat_index_impl1 = ```rust
    impl<$T> Index<usize> for $S<$T> {
        type Output = $T;
        fn index(&self, index: usize) -> &$T {
            without! {
                index < self.$len
            }
            unsafe { &*self.$ptr.add(index) }
        }
    }
```

// use ptr::offset
pat_index_impl2 = ```rust
    impl<$T2> Index<usize> for $S<$T2> {
        type Output = $T2;
        fn index(&self, $index: usize) -> &T {
            without! {
                $index < self.$len
            }
            unsafe { &*self.$ptr.offset($index as isize) }
        }
    }
```

pat_index_impl = pat_index_impl1 | pat_index_impl2
````
